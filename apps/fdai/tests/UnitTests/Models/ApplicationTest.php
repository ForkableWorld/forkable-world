<?php /** @noinspection PhpUnhandledExceptionInspection */
namespace Tests\UnitTests\Models;
use App\AppSettings\AppSettings;
use App\Http\Controllers\Web\AppsController;
use App\Models\Application;
use App\Models\Collaborator;
use App\Models\OAAccessToken;
use App\Models\OAClient;
use App\Models\OARefreshToken;
use App\Properties\Application\ApplicationIconUrlProperty;
use App\Properties\Base\BaseAccessTokenProperty;
use App\Properties\Base\BaseClientIdProperty;
use App\Slim\Controller\AppSettings\PostAppSettingsController;
use App\Storage\DB\TestDB;
use App\UI\ImageUrls;
use App\Utils\Env;
use DB;
use Illuminate\Auth\AuthenticationException;
use Tests\QMBaseTestCase;
use Tests\UnitTestCase;
/**
 * @package Tests\UnitTests\Files
 * @coversDefaultClass \App\Models\Application;
 */
class ApplicationTest extends UnitTestCase {
	const TEST_CLIENT_ID = 'laravel-test-client-id';
	/**
	 * @covers Application::getImage
	 * @noinspection PhpUnitMissingTargetForTestInspection (from a trait)
	 */
	public function testApplicationIconUrl(){
		Application::whereClientId('quantimodo')->update([Application::FIELD_ICON_URL =>
			ImageUrls::CROWD_SOURCING_UTOPIA_BRAIN_ICON]);
		$a = Application::quantimodo();
		$p = $a->getPropertyModel(ApplicationIconUrlProperty::NAME);
		$url = $a->icon_url;
		$this->assertEquals(ImageUrls::CROWD_SOURCING_UTOPIA_BRAIN_ICON, $url);
	}
	public function testDownload(){
		//        MySQLTypes::replaceStringsWithConstants();
		//        MySQLTypes::generateTraits();
		//        Button::generateProperties();
		//        Button::import();
		QMBaseTestCase::setExpectedRequestException(AuthenticationException::class);
		/** @noinspection SpellCheckingInspection */
		$url = 'api/v2/download?client_id=quantimodo&' .
			'filename=https%3A%2F%2Fstatic.quantimo.do%2Fapp_uploads%2Fquantimodo%2FbuildSettings_androidReleaseKeystoreFile_1501126319.keystore.enc';
		$this->assertGetRedirect($url);
		try {
			$this->getResponseDoesNotContain($url . '&accessToken=' .
				BaseAccessTokenProperty::PERMANENT_TEST_USER_ACCESS_TOKEN_FOR_18535, "Login", 302);
		} catch (\Exception $exception) {
			// TODO: Figure out why this is failing
			//echo $exception->getMessage();
		}
	}
	public function testApiExplorer(){
		$this->actingAsUserOne();
		$this->getResponseContains('account/api-explorer', 'iframe src="https://docs.quantimo.do/"');
	}
	public function testIntegration(){
        $application = Application::firstOrFakeSave();
        $clientId = $application->client_id;
		$application->setOwner(1);
		$this->actingAsUserOne();
        $this->getResponseContains('api/v2/apps/' . $clientId . '/integration', 'UNIQUE_ID_FOR_YOUR_USER');
	}
	public function testDataSharingList(){
		$this->actingAsUserOne();
		$this->getResponseContains('account/applications', "Revoke Access");
	}
	public function testGetPhysicianApp(){
        //Application::seed();
		Application::where(Application::FIELD_CLIENT_ID, "<>", BaseClientIdProperty::CLIENT_ID_QUANTIMODO)
            ->forceDelete();
		$this->actingAsUserOne();
		AppSettings::writable()->where(AppSettings::FIELD_USER_ID, 1)->update([AppSettings::FIELD_PHYSICIAN => 0]);
		$apps = AppsController::getPhysicianAppRowsForUser(1);
		$this->assertEquals(0, $apps->count());
		$this->assertGetRedirect('physician', "physician/user-quantimodo/edit");
		$this->getResponseContains('physician/user-quantimodo/edit', "Patient Authorization URL");
		$apps = AppsController::getPhysicianAppRowsForUser(1);
		$this->assertEquals(1, $apps->count());
		$first = $apps->first();
		$this->assertEquals('user-quantimodo', $first->client_id);
	}
	public function testPostEditApplication(){
		$this->actingAsUserOne();
		$this->getCreate();
		$this->postCreate();
		$this->getEdit();
		$this->postEditLaravel();
		$this->postEditSlim();
	}
	private function getCreate(){
		$this->getResponseContains('api/v2/apps/create', "Create New Application");
	}
	private function postCreate(){
		$name = "Laravel Test App Display Name";
		/** @noinspection SpellCheckingInspection */
		$body = [
			'_token' => 'test-token',
			'app_display_name' => $name,
			'app_description' => 'Laravel Test App Description',
			'client_id' => self::TEST_CLIENT_ID,
			'homepage_url' => 'https://www.laravel-test-homepage.com',
			'redirect_uris' => 'https://app.quantimo.do/ionic/Modo/www/callback/',
		];
        OAAccessToken::whereClientId(self::TEST_CLIENT_ID)->forceDelete();
        OARefreshToken::whereClientId(self::TEST_CLIENT_ID)->forceDelete();
        Application::whereClientId(self::TEST_CLIENT_ID)->forceDelete();
        OAClient::whereClientId( self::TEST_CLIENT_ID)->forceDelete();
        Collaborator::whereClientId( self::TEST_CLIENT_ID)->forceDelete();
		$this->assertPostRedirect('api/v2/apps/create', $body, Env::getAppUrl()."/api/v2/apps/");
		$newApplication = Application::whereClientId(self::TEST_CLIENT_ID)->first();
		$this->assertEquals($name, $newApplication->app_display_name);
		$this->assertEquals("Laravel Test App Description", $newApplication->app_description);
		$collaborator =
			DB::table('collaborators')->where('user_id', 1)->where('client_id', self::TEST_CLIENT_ID)->first();
		$this->assertNotNull($collaborator);
		//$this->assertErrorMessageContains('api/v2/apps/create', $body, "Already created");
	}
	private function getEdit(){
		$this->getResponseContains('api/v2/apps/laravel-test-client-id/edit', "Laravel Test App Display Name");
	}
	private function postEditLaravel(){
		$json = '{
          "_token": "test-token",
          "app_display_name": "Laravel Test App Display Name Changed",
          "app_description": "Laravel Test App Description Changed",
          "homepage_url": "http://www.laravel-test-homepage-changed.com",
          "redirect_uris": "https://app.quantimo.do/ionic/Modo/www/callback/"
        }';
		$this->assertPostRedirect('api/v2/apps/laravel-test-client-id/edit', $json,
			Env::getAppUrl()."/api/v2/apps/laravel-test-client-id/edit");
		$newApplication = Application::where('client_id', self::TEST_CLIENT_ID)->first();
		$this->assertEquals("Laravel Test App Display Name Changed", $newApplication->app_display_name);
		$this->assertEquals("Laravel Test App Description Changed", $newApplication->app_description);
	}
	private function postEditSlim(){
		$requestBody = '
            {"additionalSettings":{"appIds":{"googleReversedClientId":"com.googleusercontent.apps.1052648855194-9cv6lr7d617fu6b95gutkc7gvdubb8gl","appleId":"","appIdentifier":"com.quantimodo.dfgsdfg-asdf","facebookAppId":225078261031461,"ionicAppId":""},"appImages":{"appIcon":"https://placehold.it/512x512","notificationIcon":"ion-android-happy","splashScreen":"https://static.quantimo.do/img/master/splash-screens/mindfulness-splash.png","textLogo":"https://placehold.it/500x100","favicon":"https://static.quantimo.do/app_uploads/dfgsdfg-asdf/icon_16.png"},"buildSettings":{"androidReleaseKeystoreFile":null,"androidReleaseKeystorePassword":null,"androidReleaseKeyAlias":null,"androidReleaseKeyPassword":null},"companyEmail":"info@quantimo.do","downloadLinks":{"androidApp":"https://play.google.com/store/apps/details?id=com.quantimodo.dfgsdfg-asdf","iosApp":"https://itunes.apple.com/us/app/quantimodo-life-tracker/id1115037060?mt=8","chromeExtension":"https://chrome.google.com/webstore/detail/quantimodo-life-tracking/jioloifallegdkgjklafkkbniianjbgi","webApp":"https://dfgsdfg-asdf.quantimo.do"},"googleAnalyticsTrackingIds":{"adminPanel":"UA-39222734-29","endUserApps":"UA-39222734-25","backEndAPI":"UA-39222734-24","informationalHomePage":"UA-39222734-2"},"socialLinks":{"facebook":"https://www.facebook.com/Quantimodology","twitter":"https://twitter.com/quantimodo","google":"https://plus.google.com/communities/100581500031158281444","linkedIn":"https://www.linkedin.com/company/quantimodo"},"upgradeDisabled":false,"monetizationSettings":{"subscriptionsEnabled":false,"advertisingEnabled":false,"playPublicLicenseKey":null,"monetizationSettingsInstructionLinks":{"playPublicLicenseKey":"https://developer.android.com/training/in-app-billing/preparing-iab-app.html#AddToDevConsole"}}},"appDescription":"sdfgad asfd","appDesign":{"aliases":{"type":"general","active":[{"id":"addEmotionRemindersCard","title":"Varying Emotions?","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Emotions","addButtonText":"Add Emotion","nextPageButtonText":"Maybe Later","bodyText":"Do you have any emotions that fluctuate regularly? If so, add them so I can try to determine which factors are influencing them.","moreInfo":"Do you have any emotions that fluctuate regularly?  If so, add them so I can try to determine which factors are influencing them.","image":{"url":"https://static.quantimo.do/img/variable_categories/theatre_mask-96.png","height":"96","width":"96"},"$$hashKey":"object:919"},{"id":"addSymptomRemindersCard","title":"Recurring Symptoms?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Symptoms","addButtonText":"Add Symptom","nextPageButtonText":"Maybe Later","bodyText":"Got any recurring symptoms that vary in their severity?","moreInfo":"Symptom severity can be influence by hundreds of factors in daily life. The human mind can only hold 7 numbers in working memory at a time.  I can hold a billion in my mind! If you regularly record your symptoms, add them so I can use this data to determine which hidden and imperceptible factors might be worsening or improving them.","image":{"url":"https://static.quantimo.do/img/variable_categories/sad-96.png","height":"96","width":"96"},"$$hashKey":"object:920"},{"id":"addFoodRemindersCard","title":"Common Foods or Drinks?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Foods","addButtonText":"Add Food or Drink","nextPageButtonText":"Maybe Later","bodyText":"Add any foods or drinks that you consume more than a few times a week","moreInfo":"Diet can have a significant impact on your health. It\'s important to enter any foods that you regularly eat to see how they might be affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/vegetarian_food-96.png","height":"96","width":"96"},"$$hashKey":"object:921"},{"id":"addTreatmentRemindersCard","title":"Any Treatments?","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"variableCategoryName":"Treatments","addButtonText":"Add Treatment","nextPageButtonText":"Maybe Later","bodyText":"Are you taking any medications, treatments, supplements, or other interventions like meditation or psychotherapy? ","moreInfo":"Often the effects of medications and treatments aren\'t intuitively perceptible. That\'s where I come in!  If you regularly recording your treatments,  I can analyze the data swe can get a better idea which ones are helping you,which one may be harming you, and which ones are merely a waste of money.","image":{"url":"https://static.quantimo.do/img/variable_categories/pill-96.png","height":"96","width":"96"},"$$hashKey":"object:922"},{"id":"locationTrackingPage","title":"Location Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Location","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically log location to see how time spent at restaurants, the gym, work or doctors offices might be affecting you? ","moreInfo":"By automatically recording your location in the background using GPS, we might be able to figure out how the amount of time spent at the gym, restaurants, doctors, offices, home and work locations may be affecting you.  Another benefit of enabling this option is that allows the app to run in the background and open instantly instead of taking a few seconds to load.  You can view your location history by going to Menu -> History -> Locations.","image":{"url":"https://static.quantimo.do/img/variable_categories/treasure_map-96.png","height":"96","width":"96"},"$$hashKey":"object:923"},{"id":"weatherTrackingPage","title":"Weather Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Environment","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically record the weather to see how temperature or sunlight exposure might be affecting you? ","moreInfo":"By recording your local weather conditions, I might be able to figure out how the amount of sunlight or temperature is affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/chance_of_storm-96.png","height":"96","width":"96"},"$$hashKey":"object:924"},{"id":"importDataPage","title":"Import Your Data","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/intro/download_2-96.png","height":"96","width":"96"},"premiumFeature":true,"bodyText":"Let\'s go to the Import Data page and see if you\'re using any of the dozens of apps and devices that I can automatically pull data from!","nextPageButtonText":"Maybe Later","$$hashKey":"object:925"},{"id":"allDoneCard","title":"Great job!","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"overlayIcon":true,"image":{"url":"img/robots/robot-waving.svg","height":"120","width":"120"},"bodyText":"You\'re all set up!  Let\'s take a minute to record your first measurements and then you\'re done for the day! ","$$hashKey":"object:926"}],"custom":[{"id":"addEmotionRemindersCard","title":"Varying Emotions?","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Emotions","addButtonText":"Add Emotion","nextPageButtonText":"Maybe Later","bodyText":"Do you have any emotions that fluctuate regularly? If so, add them so I can try to determine which factors are influencing them.","moreInfo":"Do you have any emotions that fluctuate regularly?  If so, add them so I can try to determine which factors are influencing them.","image":{"url":"https://static.quantimo.do/img/variable_categories/theatre_mask-96.png","height":"96","width":"96"}},{"id":"addSymptomRemindersCard","title":"Recurring Symptoms?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Symptoms","addButtonText":"Add Symptom","nextPageButtonText":"Maybe Later","bodyText":"Got any recurring symptoms that vary in their severity?","moreInfo":"Symptom severity can be influence by hundreds of factors in daily life. The human mind can only hold 7 numbers in working memory at a time.  I can hold a billion in my mind! If you regularly record your symptoms, add them so I can use this data to determine which hidden and imperceptible factors might be worsening or improving them.","image":{"url":"https://static.quantimo.do/img/variable_categories/sad-96.png","height":"96","width":"96"}},{"id":"addFoodRemindersCard","title":"Common Foods or Drinks?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Foods","addButtonText":"Add Food or Drink","nextPageButtonText":"Maybe Later","bodyText":"Add any foods or drinks that you consume more than a few times a week","moreInfo":"Diet can have a significant impact on your health. It\'s important to enter any foods that you regularly eat to see how they might be affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/vegetarian_food-96.png","height":"96","width":"96"}},{"id":"addTreatmentRemindersCard","title":"Any Treatments?","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"variableCategoryName":"Treatments","addButtonText":"Add Treatment","nextPageButtonText":"Maybe Later","bodyText":"Are you taking any medications, treatments, supplements, or other interventions like meditation or psychotherapy? ","moreInfo":"Often the effects of medications and treatments aren\'t intuitively perceptible. That\'s where I come in!  If you regularly recording your treatments,  I can analyze the data swe can get a better idea which ones are helping you,which one may be harming you, and which ones are merely a waste of money.","image":{"url":"https://static.quantimo.do/img/variable_categories/pill-96.png","height":"96","width":"96"}},{"id":"locationTrackingPage","title":"Location Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Location","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically log location to see how time spent at restaurants, the gym, work or doctors offices might be affecting you? ","moreInfo":"By automatically recording your location in the background using GPS, we might be able to figure out how the amount of time spent at the gym, restaurants, doctors, offices, home and work locations may be affecting you.  Another benefit of enabling this option is that allows the app to run in the background and open instantly instead of taking a few seconds to load.  You can view your location history by going to Menu -> History -> Locations.","image":{"url":"https://static.quantimo.do/img/variable_categories/treasure_map-96.png","height":"96","width":"96"}},{"id":"weatherTrackingPage","title":"Weather Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Environment","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically record the weather to see how temperature or sunlight exposure might be affecting you? ","moreInfo":"By recording your local weather conditions, I might be able to figure out how the amount of sunlight or temperature is affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/chance_of_storm-96.png","height":"96","width":"96"}},{"id":"importDataPage","title":"Import Your Data","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/intro/download_2-96.png","height":"96","width":"96"},"premiumFeature":true,"bodyText":"Let\'s go to the Import Data page and see if you\'re using any of the dozens of apps and devices that I can automatically pull data from!","nextPageButtonText":"Maybe Later"},{"id":"allDoneCard","title":"Great job!","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"overlayIcon":true,"image":{"url":"img/robots/robot-waving.svg","height":"120","width":"120"},"bodyText":"You\'re all set up!  Let\'s take a minute to record your first measurements and then you\'re done for the day! "}]},"floatingActionButton":{"active":{"button1":{"icon":"ion-android-notifications-none","label":"Add a Reminder","stateName":"app.reminderSearch","stateParameters":{}},"button2":{"icon":"ion-compose","label":"Record a Measurement","stateName":"app.measurementAddSearch","stateParameters":{}},"button3":{"icon":"ion-ios-cloud-download-outline","label":"Import Data","stateName":"app.reminderSearch","stateParameters":{}},"button4":{"icon":"ion-help","label":"Get Help","stateName":"app.help","stateParameters":{}}},"type":"general","custom":{"button1":{"icon":"ion-android-notifications-none","label":"Add a Reminder","stateName":"app.reminderSearch","stateParameters":[]},"button2":{"icon":"ion-compose","label":"Record a Measurement","stateName":"app.measurementAddSearch","stateParameters":[]},"button3":{"icon":"ion-ios-cloud-download-outline","label":"Import Data","stateName":"app.reminderSearch","stateParameters":[]},"button4":{"icon":"ion-help","label":"Get Help","stateName":"app.help","stateParameters":[]}}},"helpCard":{"active":[{"id":"getStartedHelpCard","ngIfLogic":"stateParams.showHelpCards === true && !hideGetStartedHelpCard","title":"Reminder Inbox","backgroundColor":"#f09402","circleColor":"#fab952","iconClass":"icon positive ion-archive","bodyText":"Scroll through the Inbox and press the appropriate button on each reminder notification. Each one only takes a few seconds. You\'ll be shocked at how much valuable data you can collect with just a few minutes in the Reminder Inbox each day!","hideHelpCardText":"Got it!","hideHelpCardIonIcon":"ion-checkmark","$$hashKey":"object:1005"},{"id":"recordMeasurementInfoCard","ngIfLogic":"stateParams.showHelpCards === true && !hideRecordMeasurementInfoCard","title":"Record Measurements","backgroundColor":"#f09402","circleColor":"#fab952","iconClass":"icon positive ion-edit","bodyText":"Want to just record a medication, food or symptom immediately instead of creating a reminder? Just go to the Record Measurement menu item and select the appropriate variable category. Alternatively, you can just press the little red button at the bottom of the screen.","hideHelpCardText":"Got it!","hideHelpCardIonIcon":"ion-checkmark","$$hashKey":"object:1006"},{"id":"chromeExtensionInfoCard","ngIfLogic":"stateParams.showHelpCards === true && isMobile && !hideChromeExtensionInfoCard","title":"Track on the Computer","backgroundColor":"#0f9d58","circleColor":"#03c466","iconClass":"icon positive ion-social-chrome","bodyText":"Did you know that you can easily track everything on your laptop and desktop with our Google Chrome browser extension?  Your data is synced between devices so you\'ll never have to track twice!","hideHelpCardText":"Dismiss","hideHelpCardIonIcon":"ion-close-circled","emailButton":{"type":"chrome","text":"Send Me a Link","ionIcon":"ion-checkmark"},"$$hashKey":"object:1007"},{"id":"getHelpInfoCard","ngIfLogic":"stateParams.showHelpCards === true && !hideGetHelpInfoCard","title":"Need Help?","iconClass":"icon positive ion-help-circled","bodyText":"If you need help or have any suggestions, please click the question mark in the upper right corner.","hideHelpCardText":"Got it!","hideHelpCardIonIcon":"ion-checkmark","$$hashKey":"object:1008"},{"id":"getFitbitHelpInfoCard","ngIfLogic":"stateParams.showHelpCards === true && !hideGetFitbitHelpInfoCard","title":"Automated Tracking","iconClass":"icon positive ion-wand","bodyText":"Want to automatically record your sleep, exercise, and heart rate?","hideHelpCardText":"No Thanks","hideHelpCardIonIcon":"ion-android-cancel","emailButton":{"type":"fitbit","text":"Get Fitbit","ionIcon":"ion-checkmark"},"$$hashKey":"object:1009"}],"type":"general","custom":[{"id":"getStartedHelpCard","ngIfLogic":"stateParams.showHelpCards === true && !hideGetStartedHelpCard","title":"Reminder Inbox","backgroundColor":"#f09402","circleColor":"#fab952","iconClass":"icon positive ion-archive","bodyText":"Scroll through the Inbox and press the appropriate button on each reminder notification. Each one only takes a few seconds. You\'ll be shocked at how much valuable data you can collect with just a few minutes in the Reminder Inbox each day!","hideHelpCardText":"Got it!","hideHelpCardIonIcon":"ion-checkmark"},{"id":"recordMeasurementInfoCard","ngIfLogic":"stateParams.showHelpCards === true && !hideRecordMeasurementInfoCard","title":"Record Measurements","backgroundColor":"#f09402","circleColor":"#fab952","iconClass":"icon positive ion-edit","bodyText":"Want to just record a medication, food or symptom immediately instead of creating a reminder? Just go to the Record Measurement menu item and select the appropriate variable category. Alternatively, you can just press the little red button at the bottom of the screen.","hideHelpCardText":"Got it!","hideHelpCardIonIcon":"ion-checkmark"},{"id":"chromeExtensionInfoCard","ngIfLogic":"stateParams.showHelpCards === true && isMobile && !hideChromeExtensionInfoCard","title":"Track on the Computer","backgroundColor":"#0f9d58","circleColor":"#03c466","iconClass":"icon positive ion-social-chrome","bodyText":"Did you know that you can easily track everything on your laptop and desktop with our Google Chrome browser extension?  Your data is synced between devices so you\'ll never have to track twice!","hideHelpCardText":"Dismiss","hideHelpCardIonIcon":"ion-close-circled","emailButton":{"type":"chrome","text":"Send Me a Link","ionIcon":"ion-checkmark"}},{"id":"getHelpInfoCard","ngIfLogic":"stateParams.showHelpCards === true && !hideGetHelpInfoCard","title":"Need Help?","iconClass":"icon positive ion-help-circled","bodyText":"If you need help or have any suggestions, please click the question mark in the upper right corner.","hideHelpCardText":"Got it!","hideHelpCardIonIcon":"ion-checkmark"},{"id":"getFitbitHelpInfoCard","ngIfLogic":"stateParams.showHelpCards === true && !hideGetFitbitHelpInfoCard","title":"Automated Tracking","iconClass":"icon positive ion-wand","bodyText":"Want to automatically record your sleep, exercise, and heart rate?","hideHelpCardText":"No Thanks","hideHelpCardIonIcon":"ion-android-cancel","emailButton":{"type":"fitbit","text":"Get Fitbit","ionIcon":"ion-checkmark"}}]},"intro":{"type":"general","active":[{"newIntroStyle":true,"title":"Hi! I\'m dfgsdfg asdf!","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"image":{"url":"img/robots/quantimodo-robot-waving.svg","height":"120","width":"120"},"bodyText":"I\'ve been programmed to reduce human suffering with data.","$$hashKey":"object:1151"},{"newIntroStyle":true,"title":"Hidden Influences","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"image":{"url":"img/intro/patient-frown-factors.png","height":"120","width":"120"},"bodyText":"Your symptoms can be worsened or improved by medical treatments, your sleep, exercise, the hundreds of chemicals you consume through your diet, and even the weather!","$$hashKey":"object:1152"},{"newIntroStyle":true,"title":"Only Human","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/brains/brain-pink.svg","height":"120","width":"120"},"bodyText":"Human brains can only hold 7 numbers in working-memory at a time.  So on their own, they\'re not able to determine which diet is best for you. ","$$hashKey":"object:1153"},{"newIntroStyle":true,"title":"Treatment Determination","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"image":{"url":"img/intro/doctor-frown-factors.png","height":"120","width":"120"},"bodyText":"Indeed, your doctor has access to less than 1% of the relevant information when they use intuition to determine the best ways to treat your symptoms!","$$hashKey":"object:1154"},{"newIntroStyle":true,"title":"Machine Learning","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"image":{"url":"img/robots/quantimodo-robot-brain.svg","height":"120","width":"120"},"bodyText":"My brain can hold trillions of numbers!  I can also analyze it to help your dietitian determine how different foods could be affecting your health! ","$$hashKey":"object:1155"},{"newIntroStyle":true,"title":"Automated Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"image":{"url":"img/intro/download_2-96.png","height":"100","width":"100"},"bodyText":"Weight, blood pressure, heart rate, physical activity data can be collected automatically and imported from dozens of devices.  Weather and the amount of time spent at the gym, restaurants, work, or doctors offices can be collected via your phone\'s GPS.","$$hashKey":"object:1156"},{"newIntroStyle":true,"title":"Effortless Tracking","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/intro/inbox.svg","height":"90","width":"90"},"bodyText":"By taking just a few minutes each day, you can easily record your diet and symptoms in the Reminder Inbox.  The more data you give me, the smarter I get!  Your data doesn\'t have to be perfect to be valuable, but it\'s important to track regularly. ","$$hashKey":"object:1157"},{"newIntroStyle":true,"title":"Data Security","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"image":{"url":"img/intro/lock.svg","height":"90","width":"90"},"bodyText":"I use bank-level encryption to keep your data secure.  Human eyes will never see your data unless you intentionally share it. ","$$hashKey":"object:1158"}],"custom":[{"newIntroStyle":true,"title":"Hi! I\'m dfgsdfg asdf!","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"image":{"height":"120","width":"120","url":"img/robots/robot-waving.svg"},"overlayIcon":true,"bodyText":"I\'m going to use data to help you take the guesswork out of healthy eating!"},{"newIntroStyle":true,"title":"Hidden Influences","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"image":{"url":"img/intro/patient-frown-factors.png","height":"120","width":"120"},"bodyText":"Your symptoms can be worsened or improved by medical treatments, your sleep, exercise, the hundreds of chemicals you consume through your diet, and even the weather!"},{"newIntroStyle":true,"title":"Only Human","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/brains/brain-pink.svg","height":"120","width":"120"},"bodyText":"Human brains can only hold 7 numbers in working-memory at a time.  So on their own, they\'re not able to determine which diet is best for you. "},{"newIntroStyle":true,"title":"Machine Learning","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"image":{"url":"img/robots/quantimodo-robot-brain.svg","height":"120","width":"120"},"bodyText":"My brain can hold trillions of numbers!  I can also analyze it to help your dietitian determine how different foods could be affecting your health! "},{"newIntroStyle":true,"title":"Automated Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"image":{"url":"img/intro/download_2-96.png","height":"100","width":"100"},"bodyText":"Weight, blood pressure, heart rate, physical activity data can be collected automatically and imported from dozens of devices.  Weather and the amount of time spent at the gym, restaurants, work, or doctors offices can be collected via your phone\'s GPS."},{"newIntroStyle":true,"title":"Effortless Tracking","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/intro/inbox.svg","height":"90","width":"90"},"bodyText":"By taking just a few minutes each day, you can easily record your diet and symptoms in the Reminder Inbox.  The more data you give me, the smarter I get!  Your data doesn\'t have to be perfect to be valuable, but it\'s important to track regularly. "},{"newIntroStyle":true,"title":"Data Security","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"image":{"url":"img/intro/lock.svg","height":"90","width":"90"},"bodyText":"I use bank-level encryption to keep your data secure.  Human eyes will never see your data unless you intentionally share it. "}]},"menu":{"active":[{"title":"Reminder Inbox","href":"#/app/reminders-inbox","icon":"ion-archive","$$hashKey":"object:191","id":"reminders-inbox"},{"title":"My Variables","click":"toggleVariablesSubMenu","showSubMenuVariable":"showVariablesSubMenu","subMenu":[{"title":"Everything","href":"#/app/reminders-list","icon":"ion-android-globe","$$hashKey":"object:228","id":"reminders-list"},{"title":"Treatments","href":"#/app/reminders-list-category/Treatments","icon":"ion-ios-medkit-outline","$$hashKey":"object:229","params":{"variableCategoryName":"Treatments"},"id":"reminders-list-category-treatments"},{"title":"Symptoms","href":"#/app/reminders-list-category/Symptoms","icon":"ion-sad-outline","$$hashKey":"object:230","params":{"variableCategoryName":"Symptoms"},"id":"reminders-list-category-symptoms"},{"title":"Vital Signs","href":"#/app/reminders-list-category/Vital Signs","icon":"ion-ios-pulse","$$hashKey":"object:231","params":{"variableCategoryName":"Vital Signs"},"id":"reminders-list-category-vital-signs"},{"title":"Emotions","href":"#/app/reminders-list-category/Emotions","icon":"ion-happy-outline","$$hashKey":"object:232","params":{"variableCategoryName":"Emotions"},"id":"reminders-list-category-emotions"},{"title":"Foods","href":"#/app/reminders-list-category/Foods","icon":"ion-ios-nutrition-outline","$$hashKey":"object:233","params":{"variableCategoryName":"Foods"},"id":"reminders-list-category-foods"},{"title":"Physical Activity","href":"#/app/reminders-list-category/Physical Activity","icon":"ion-ios-body-outline","$$hashKey":"object:234","params":{"variableCategoryName":"Physical Activity"},"id":"reminders-list-category-physical-activity"}],"icon":"ion-android-globe","$$hashKey":"object:192","id":"my-variables"},{"title":"History","click":"toggleHistorySubMenu","showSubMenuVariable":"showHistorySubMenu","subMenu":[{"title":"All Measurements","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Anything","icon":"ion-android-globe","$$hashKey":"object:260","params":{"variableCategoryName":"Anything"},"id":"history-all-category-anything"},{"title":"Emotions","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Emotions","icon":"ion-happy-outline","$$hashKey":"object:261","params":{"variableCategoryName":"Emotions"},"id":"history-all-category-emotions"},{"title":"Foods","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Foods","icon":"ion-ios-nutrition-outline","$$hashKey":"object:262","params":{"variableCategoryName":"Foods"},"id":"history-all-category-foods"},{"title":"Symptoms","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Symptoms","icon":"ion-sad-outline","$$hashKey":"object:263","params":{"variableCategoryName":"Symptoms"},"id":"history-all-category-symptoms"},{"title":"Treatments","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Treatments","icon":"ion-ios-medkit-outline","$$hashKey":"object:264","params":{"variableCategoryName":"Treatments"},"id":"history-all-category-treatments"},{"title":"Physical Activity","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Physical Activity","icon":"ion-ios-body-outline","$$hashKey":"object:265","params":{"variableCategoryName":"Physical Activity"},"id":"history-all-category-physical-activity"},{"title":"Vital Signs","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Vital Signs","icon":"ion-ios-pulse","$$hashKey":"object:266","params":{"variableCategoryName":"Vital Signs"},"id":"history-all-category-vital-signs"},{"title":"Locations","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Location","icon":"ion-ios-location-outline","$$hashKey":"object:267","params":{"variableCategoryName":"Location"},"id":"history-all-category-location"}],"icon":"ion-ios-list-outline","$$hashKey":"object:193","id":"history"},{"title":"Import Data","href":"#/app/import","icon":"ion-ios-cloud-download-outline","$$hashKey":"object:194","id":"import"},{"title":"Discoveries","click":"togglePredictorSearchSubMenu","showSubMenuVariable":"showPredictorSearchSubMenu","subMenu":[{"title":"Predictor Search","showSubMenuVariable":"showPredictorSearchSubMenu","href":"#/app/predictor-search","icon":"ion-log-in","$$hashKey":"object:300","id":"predictor-search"},{"title":"Outcome Search","showSubMenuVariable":"showPredictorSearchSubMenu","href":"#/app/outcome-search","icon":"ion-log-out","$$hashKey":"object:301","id":"outcome-search"},{"title":"Create Study","href":"#/app/study-creation","icon":"ion-erlenmeyer-flask","$$hashKey":"object:302","id":"study-creation"}],"icon":"ion-ios-analytics","$$hashKey":"object:195","id":"discoveries"},{"title":"Charts","href":"#/app/chart-search","icon":"ion-arrow-graph-up-right","$$hashKey":"object:196","id":"chart-search"},{"title":"Settings","href":"#/app/settings","icon":"ion-ios-gear-outline","$$hashKey":"object:197","id":"settings"}],"custom":[{"title":"Reminder Inbox","href":"#/app/reminders-inbox","icon":"ion-archive","$$hashKey":"object:191","id":"reminders-inbox"},{"title":"My Variables","click":"toggleVariablesSubMenu","showSubMenuVariable":"showVariablesSubMenu","subMenu":[{"title":"Everything","href":"#/app/reminders-list","icon":"ion-android-globe","$$hashKey":"object:228","id":"reminders-list"},{"title":"Treatments","href":"#/app/reminders-list-category/Treatments","icon":"ion-ios-medkit-outline","$$hashKey":"object:229","params":{"variableCategoryName":"Treatments"},"id":"reminders-list-category-treatments"},{"title":"Symptoms","href":"#/app/reminders-list-category/Symptoms","icon":"ion-sad-outline","$$hashKey":"object:230","params":{"variableCategoryName":"Symptoms"},"id":"reminders-list-category-symptoms"},{"title":"Vital Signs","href":"#/app/reminders-list-category/Vital Signs","icon":"ion-ios-pulse","$$hashKey":"object:231","params":{"variableCategoryName":"Vital Signs"},"id":"reminders-list-category-vital-signs"},{"title":"Emotions","href":"#/app/reminders-list-category/Emotions","icon":"ion-happy-outline","$$hashKey":"object:232","params":{"variableCategoryName":"Emotions"},"id":"reminders-list-category-emotions"},{"title":"Foods","href":"#/app/reminders-list-category/Foods","icon":"ion-ios-nutrition-outline","$$hashKey":"object:233","params":{"variableCategoryName":"Foods"},"id":"reminders-list-category-foods"},{"title":"Physical Activity","href":"#/app/reminders-list-category/Physical Activity","icon":"ion-ios-body-outline","$$hashKey":"object:234","params":{"variableCategoryName":"Physical Activity"},"id":"reminders-list-category-physical-activity"}],"icon":"ion-android-globe","$$hashKey":"object:192","id":"my-variables"},{"title":"History","click":"toggleHistorySubMenu","showSubMenuVariable":"showHistorySubMenu","subMenu":[{"title":"All Measurements","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Anything","icon":"ion-android-globe","$$hashKey":"object:260","params":{"variableCategoryName":"Anything"},"id":"history-all-category-anything"},{"title":"Emotions","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Emotions","icon":"ion-happy-outline","$$hashKey":"object:261","params":{"variableCategoryName":"Emotions"},"id":"history-all-category-emotions"},{"title":"Foods","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Foods","icon":"ion-ios-nutrition-outline","$$hashKey":"object:262","params":{"variableCategoryName":"Foods"},"id":"history-all-category-foods"},{"title":"Symptoms","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Symptoms","icon":"ion-sad-outline","$$hashKey":"object:263","params":{"variableCategoryName":"Symptoms"},"id":"history-all-category-symptoms"},{"title":"Treatments","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Treatments","icon":"ion-ios-medkit-outline","$$hashKey":"object:264","params":{"variableCategoryName":"Treatments"},"id":"history-all-category-treatments"},{"title":"Physical Activity","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Physical Activity","icon":"ion-ios-body-outline","$$hashKey":"object:265","params":{"variableCategoryName":"Physical Activity"},"id":"history-all-category-physical-activity"},{"title":"Vital Signs","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Vital Signs","icon":"ion-ios-pulse","$$hashKey":"object:266","params":{"variableCategoryName":"Vital Signs"},"id":"history-all-category-vital-signs"},{"title":"Locations","showSubMenuVariable":"showHistorySubMenu","href":"#/app/history-all-category/Location","icon":"ion-ios-location-outline","$$hashKey":"object:267","params":{"variableCategoryName":"Location"},"id":"history-all-category-location"}],"icon":"ion-ios-list-outline","$$hashKey":"object:193","id":"history"},{"title":"Import Data","href":"#/app/import","icon":"ion-ios-cloud-download-outline","$$hashKey":"object:194","id":"import"},{"title":"Discoveries","click":"togglePredictorSearchSubMenu","showSubMenuVariable":"showPredictorSearchSubMenu","subMenu":[{"title":"Predictor Search","showSubMenuVariable":"showPredictorSearchSubMenu","href":"#/app/predictor-search","icon":"ion-log-in","$$hashKey":"object:300","id":"predictor-search"},{"title":"Outcome Search","showSubMenuVariable":"showPredictorSearchSubMenu","href":"#/app/outcome-search","icon":"ion-log-out","$$hashKey":"object:301","id":"outcome-search"},{"title":"Create Study","href":"#/app/study-creation","icon":"ion-erlenmeyer-flask","$$hashKey":"object:302","id":"study-creation"}],"icon":"ion-ios-analytics","$$hashKey":"object:195","id":"discoveries"},{"title":"Charts","href":"#/app/chart-search","icon":"ion-arrow-graph-up-right","$$hashKey":"object:196","id":"chart-search"},{"title":"Settings","href":"#/app/settings","icon":"ion-ios-gear-outline","$$hashKey":"object:197","id":"settings"}],"type":"general"},"onboarding":{"type":"general","active":[{"id":"addEmotionRemindersCard","title":"Varying Emotions?","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Emotions","addButtonText":"Add Emotion","nextPageButtonText":"Maybe Later","bodyText":"Do you have any emotions that fluctuate regularly? If so, add them so I can try to determine which factors are influencing them.","moreInfo":"Do you have any emotions that fluctuate regularly?  If so, add them so I can try to determine which factors are influencing them.","image":{"url":"https://static.quantimo.do/img/variable_categories/theatre_mask-96.png","height":"96","width":"96"},"$$hashKey":"object:1313"},{"id":"addSymptomRemindersCard","title":"Recurring Symptoms?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Symptoms","addButtonText":"Add Symptom","nextPageButtonText":"Maybe Later","bodyText":"Got any recurring symptoms that vary in their severity?","moreInfo":"Symptom severity can be influence by hundreds of factors in daily life. The human mind can only hold 7 numbers in working memory at a time.  I can hold a billion in my mind! If you regularly record your symptoms, add them so I can use this data to determine which hidden and imperceptible factors might be worsening or improving them.","image":{"url":"https://static.quantimo.do/img/variable_categories/sad-96.png","height":"96","width":"96"},"$$hashKey":"object:1314"},{"id":"addFoodRemindersCard","title":"Common Foods or Drinks?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Foods","addButtonText":"Add Food or Drink","nextPageButtonText":"Maybe Later","bodyText":"Add any foods or drinks that you consume more than a few times a week","moreInfo":"Diet can have a significant impact on your health. It\'s important to enter any foods that you regularly eat to see how they might be affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/vegetarian_food-96.png","height":"96","width":"96"},"$$hashKey":"object:1315"},{"id":"addTreatmentRemindersCard","title":"Any Treatments?","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"variableCategoryName":"Treatments","addButtonText":"Add Treatment","nextPageButtonText":"Maybe Later","bodyText":"Are you taking any medications, treatments, supplements, or other interventions like meditation or psychotherapy? ","moreInfo":"Often the effects of medications and treatments aren\'t intuitively perceptible. That\'s where I come in!  If you regularly recording your treatments,  I can analyze the data swe can get a better idea which ones are helping you,which one may be harming you, and which ones are merely a waste of money.","image":{"url":"https://static.quantimo.do/img/variable_categories/pill-96.png","height":"96","width":"96"},"$$hashKey":"object:1316"},{"id":"locationTrackingPage","title":"Location Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Location","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically log location to see how time spent at restaurants, the gym, work or doctors offices might be affecting you? ","moreInfo":"By automatically recording your location in the background using GPS, we might be able to figure out how the amount of time spent at the gym, restaurants, doctors, offices, home and work locations may be affecting you.  Another benefit of enabling this option is that allows the app to run in the background and open instantly instead of taking a few seconds to load.  You can view your location history by going to Menu -> History -> Locations.","image":{"url":"https://static.quantimo.do/img/variable_categories/treasure_map-96.png","height":"96","width":"96"},"$$hashKey":"object:1317"},{"id":"weatherTrackingPage","title":"Weather Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Environment","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically record the weather to see how temperature or sunlight exposure might be affecting you? ","moreInfo":"By recording your local weather conditions, I might be able to figure out how the amount of sunlight or temperature is affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/chance_of_storm-96.png","height":"96","width":"96"},"$$hashKey":"object:1318"},{"id":"importDataPage","title":"Import Your Data","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/intro/download_2-96.png","height":"96","width":"96"},"premiumFeature":true,"bodyText":"Let\'s go to the Import Data page and see if you\'re using any of the dozens of apps and devices that I can automatically pull data from!","nextPageButtonText":"Maybe Later","$$hashKey":"object:1319"},{"id":"allDoneCard","title":"Great job!","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"overlayIcon":true,"image":{"url":"img/robots/robot-waving.svg","height":"120","width":"120"},"bodyText":"You\'re all set up!  Let\'s take a minute to record your first measurements and then you\'re done for the day! ","$$hashKey":"object:1320"}],"custom":[{"id":"addEmotionRemindersCard","title":"Varying Emotions?","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Emotions","addButtonText":"Add Emotion","nextPageButtonText":"Maybe Later","bodyText":"Do you have any emotions that fluctuate regularly? If so, add them so I can try to determine which factors are influencing them.","moreInfo":"Do you have any emotions that fluctuate regularly?  If so, add them so I can try to determine which factors are influencing them.","image":{"url":"https://static.quantimo.do/img/variable_categories/theatre_mask-96.png","height":"96","width":"96"}},{"id":"addSymptomRemindersCard","title":"Recurring Symptoms?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Symptoms","addButtonText":"Add Symptom","nextPageButtonText":"Maybe Later","bodyText":"Got any recurring symptoms that vary in their severity?","moreInfo":"Symptom severity can be influence by hundreds of factors in daily life. The human mind can only hold 7 numbers in working memory at a time.  I can hold a billion in my mind! If you regularly record your symptoms, add them so I can use this data to determine which hidden and imperceptible factors might be worsening or improving them.","image":{"url":"https://static.quantimo.do/img/variable_categories/sad-96.png","height":"96","width":"96"}},{"id":"addFoodRemindersCard","title":"Common Foods or Drinks?","color":{"backgroundColor":"#3467d6","circleColor":"#5b95f9"},"variableCategoryName":"Foods","addButtonText":"Add Food or Drink","nextPageButtonText":"Maybe Later","bodyText":"Add any foods or drinks that you consume more than a few times a week","moreInfo":"Diet can have a significant impact on your health. It\'s important to enter any foods that you regularly eat to see how they might be affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/vegetarian_food-96.png","height":"96","width":"96"}},{"id":"addTreatmentRemindersCard","title":"Any Treatments?","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"variableCategoryName":"Treatments","addButtonText":"Add Treatment","nextPageButtonText":"Maybe Later","bodyText":"Are you taking any medications, treatments, supplements, or other interventions like meditation or psychotherapy? ","moreInfo":"Often the effects of medications and treatments aren\'t intuitively perceptible. That\'s where I come in!  If you regularly recording your treatments,  I can analyze the data swe can get a better idea which ones are helping you,which one may be harming you, and which ones are merely a waste of money.","image":{"url":"https://static.quantimo.do/img/variable_categories/pill-96.png","height":"96","width":"96"}},{"id":"locationTrackingPage","title":"Location Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Location","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically log location to see how time spent at restaurants, the gym, work or doctors offices might be affecting you? ","moreInfo":"By automatically recording your location in the background using GPS, we might be able to figure out how the amount of time spent at the gym, restaurants, doctors, offices, home and work locations may be affecting you.  Another benefit of enabling this option is that allows the app to run in the background and open instantly instead of taking a few seconds to load.  You can view your location history by going to Menu -> History -> Locations.","image":{"url":"https://static.quantimo.do/img/variable_categories/treasure_map-96.png","height":"96","width":"96"}},{"id":"weatherTrackingPage","title":"Weather Tracking","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"variableCategoryName":"Environment","premiumFeature":true,"nextPageButtonText":"Maybe Later","bodyText":"Would you like to automatically record the weather to see how temperature or sunlight exposure might be affecting you? ","moreInfo":"By recording your local weather conditions, I might be able to figure out how the amount of sunlight or temperature is affecting you.","image":{"url":"https://static.quantimo.do/img/variable_categories/chance_of_storm-96.png","height":"96","width":"96"}},{"id":"importDataPage","title":"Import Your Data","color":{"backgroundColor":"#f09402","circleColor":"#fab952"},"image":{"url":"img/intro/download_2-96.png","height":"96","width":"96"},"premiumFeature":true,"bodyText":"Let\'s go to the Import Data page and see if you\'re using any of the dozens of apps and devices that I can automatically pull data from!","nextPageButtonText":"Maybe Later"},{"id":"allDoneCard","title":"Great job!","color":{"backgroundColor":"#0f9d58","circleColor":"#03c466"},"overlayIcon":true,"image":{"url":"img/robots/robot-waving.svg","height":"120","width":"120"},"bodyText":"You\'re all set up!  Let\'s take a minute to record your first measurements and then you\'re done for the day! "}]},"upgradePleadingCard":null,"ionNavBarClass":"bar-positive","physicianAlias":"Physician","patientAlias":"Patient","welcomeState":"app.welcome","backgroundColor":"#3467d6","cordovaLocalNotificationsEnabled":false,"defaultState":"app.remindersInbox","wordAliases":[]},"appDisplayName":"dfgsdfg asdf","appStatus":{"buildStatus":{"androidArmv7Debug":"BUILDING","androidArmv7Release":"BUILDING","androidRelease":"BUILDING","androidX86Debug":"BUILDING","androidX86Release":"BUILDING","chromeExtension":"BUILDING","ios":"BUILDING"},"betaDownloadLinks":{"androidArmv7Debug":null,"androidArmv7Release":null,"androidRelease":null,"androidX86Debug":null,"androidX86Release":null,"chromeExtension":null,"ios":null},"buildEnabled":{"androidArmv7Debug":false,"androidArmv7Release":false,"androidRelease":false,"androidX86Debug":false,"androidX86Release":false,"chromeExtension":false,"ios":false}},"appType":"general","buildEnabled":false,"clientId":"' .
			self::TEST_CLIENT_ID . '","collaborators":[{"iD":75557,"clientId":"dfgsdfg-asdf","userLogin":"testuser2343@423.csdf.com","userEmail":"testuser2343@423.csdf.com","userNicename":"","userUrl":"","userRegistered":"2017-07-29 06:03:03","userActivationKey":"","userStatus":0,"displayName":"testuser2343@423.csdf.com","avatarImage":null,"regProvider":null,"providerId":null,"updatedAt":"2017-07-29 18:03:52","createdAt":"2017-07-29 18:03:52","unsubscribed":0,"oldUser":0,"stripeActive":0,"stripeId":null,"stripeSubscription":null,"stripePlan":null,"lastFour":null,"trialEndsAt":null,"subscriptionEndsAt":null,"roles":null,"timeZoneOffset":300,"deletedAt":null,"earliestReminderTime":"06:00:00","latestReminderTime":"22:00:00","pushNotificationsEnabled":1,"trackLocation":0,"combineNotifications":0,"sendReminderNotificationEmails":0,"sendPredictorEmails":1,"getPreviewBuilds":0,"subscriptionProvider":null,"lastSmsTrackingReminderNotificationId":null,"smsNotificationsEnabled":0,"phoneVerificationCode":null,"phoneNumber":null,"hasAndroidApp":0,"hasIosApp":0,"hasChromeExtension":0,"referrerUserId":null,"id":405,"userId":75557,"appId":690,"type":"owner","$$hashKey":"object:759"}],"homepageUrl":"https://quantimo.do","$$hashKey":"object:2813"}
        ';
		$body = json_decode($requestBody, true);
		$body['clientId'] = self::TEST_CLIENT_ID;
		$response = PostAppSettingsController::updateAppSettings($body);
		$this->assertNotNull($response['appSettings']->additionalSettings);
		$this->assertEquals(self::TEST_CLIENT_ID, $response['appSettings']->clientId);
	}
}
